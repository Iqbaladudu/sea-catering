{"version":3,"file":"index.js","names":["c","_c","useModal","React","useAuth","SelectAllStatus","useSelection","useTranslation","ListSelectionButton","PublishManyDrawerContent","PublishMany","props","$","count","selectAll","selected","t0","_jsx","PublishMany_v4","ids","Array","from","keys","AllAvailable","collection","slug","versions","undefined","permissions","t","openModal","collectionPermissions","collections","hasPermission","update","drawerSlug","drafts","t1","t2","_jsxs","Fragment","children","onClick"],"sources":["../../../src/elements/PublishMany/index.tsx"],"sourcesContent":["'use client'\nimport type { ClientCollectionConfig } from 'payload'\n\nimport { useModal } from '@faceless-ui/modal'\nimport React from 'react'\n\nimport { useAuth } from '../../providers/Auth/index.js'\nimport { SelectAllStatus, useSelection } from '../../providers/Selection/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { ListSelectionButton } from '../ListSelection/index.js'\nimport { PublishManyDrawerContent } from './DrawerContent.js'\n\nexport type PublishManyProps = {\n  collection: ClientCollectionConfig\n}\n\nexport const PublishMany: React.FC<PublishManyProps> = (props) => {\n  const { count, selectAll, selected } = useSelection()\n\n  return (\n    <PublishMany_v4\n      {...props}\n      count={count}\n      ids={Array.from(selected.keys())}\n      selectAll={selectAll === SelectAllStatus.AllAvailable}\n    />\n  )\n}\n\ntype PublishMany_v4Props = {\n  count: number\n  ids: (number | string)[]\n  selectAll: boolean\n} & PublishManyProps\nexport const PublishMany_v4: React.FC<PublishMany_v4Props> = (props) => {\n  const { collection, collection: { slug, versions } = {}, count, ids, selectAll } = props\n\n  const { permissions } = useAuth()\n  const { t } = useTranslation()\n\n  const { openModal } = useModal()\n\n  const collectionPermissions = permissions?.collections?.[slug]\n  const hasPermission = collectionPermissions?.update\n\n  const drawerSlug = `publish-${slug}`\n\n  if (!versions?.drafts || count === 0 || !hasPermission) {\n    return null\n  }\n\n  return (\n    <React.Fragment>\n      <ListSelectionButton\n        aria-label={t('version:publish')}\n        onClick={() => {\n          openModal(drawerSlug)\n        }}\n      >\n        {t('version:publish')}\n      </ListSelectionButton>\n      <PublishManyDrawerContent\n        collection={collection}\n        drawerSlug={drawerSlug}\n        ids={ids}\n        selectAll={selectAll}\n      />\n    </React.Fragment>\n  )\n}\n"],"mappings":"AAAA;;AAAA,SAAAA,CAAA,IAAAC,EAAA;;AAGA,SAASC,QAAQ,QAAQ;AACzB,OAAOC,KAAA,MAAW;AAElB,SAASC,OAAO,QAAQ;AACxB,SAASC,eAAe,EAAEC,YAAY,QAAQ;AAC9C,SAASC,cAAc,QAAQ;AAC/B,SAASC,mBAAmB,QAAQ;AACpC,SAASC,wBAAwB,QAAQ;AAMzC,OAAO,MAAMC,WAAA,GAA0CC,KAAA;EAAA,MAAAC,CAAA,GAAAX,EAAA;EACrD;IAAAY,KAAA;IAAAC,SAAA;IAAAC;EAAA,IAAuCT,YAAA;EAAA,IAAAU,EAAA;EAAA,IAAAJ,CAAA,QAAAC,KAAA,IAAAD,CAAA,QAAAD,KAAA,IAAAC,CAAA,QAAAE,SAAA,IAAAF,CAAA,QAAAG,QAAA;IAGrCC,EAAA,GAAAC,IAAA,CAAAC,cAAA;MAAA,GACMP,KAAK;MAAAE,KAAA;MAAAM,GAAA,EAEJC,KAAA,CAAAC,IAAA,CAAWN,QAAA,CAAAO,IAAA,CAAa;MAAAR,SAAA,EAClBA,SAAA,KAAAT,eAAA,CAAAkB;IAA0C,C;;;;;;;;;SAJvDP,E;CAOJ;AAOA,OAAO,MAAME,cAAA,GAAgDP,KAAA;EAAA,MAAAC,CAAA,GAAAX,EAAA;EAC3D;IAAAuB,UAAA;IAAAA,UAAA,EAAAR,EAAA;IAAAH,KAAA;IAAAM,GAAA;IAAAL;EAAA,IAAmFH,KAAA;EAAnD;IAAAc,IAAA;IAAAC;EAAA,IAAAV,EAAuB,KAAAW,SAAA,QAAvBX,EAAuB;EAEvD;IAAAY;EAAA,IAAwBxB,OAAA;EACxB;IAAAyB;EAAA,IAActB,cAAA;EAEd;IAAAuB;EAAA,IAAsB5B,QAAA;EAEtB,MAAA6B,qBAAA,GAA8BH,WAAA,EAAAI,WAAA,GAA2BP,IAAA;EACzD,MAAAQ,aAAA,GAAsBF,qBAAA,EAAAG,MAAA;EAEtB,MAAAC,UAAA,GAAmB,WAAWV,IAAA,EAAM;EAAA,IAEhC,CAACC,QAAA,EAAAU,MAAA,IAAoBvB,KAAA,MAAU,KAAMoB,aAAA;IAAA;EAAA;EAAA,IAAAI,EAAA;EAAA,IAAAzB,CAAA,QAAAY,UAAA,IAAAZ,CAAA,QAAAuB,UAAA,IAAAvB,CAAA,QAAAO,GAAA,IAAAP,CAAA,QAAAkB,SAAA,IAAAlB,CAAA,QAAAE,SAAA,IAAAF,CAAA,QAAAiB,CAAA;IAAA,IAAAS,EAAA;IAAA,IAAA1B,CAAA,QAAAuB,UAAA,IAAAvB,CAAA,QAAAkB,SAAA;MAQ1BQ,EAAA,GAAAA,CAAA;QACPR,SAAA,CAAUK,UAAA;MAAA;MACZvB,CAAA,MAAAuB,UAAA;MAAAvB,CAAA,MAAAkB,SAAA;MAAAlB,CAAA,MAAA0B,EAAA;IAAA;MAAAA,EAAA,GAAA1B,CAAA;IAAA;IALJyB,EAAA,GAAAE,KAAA,CAAApC,KAAA,CAAAqC,QAAA;MAAAC,QAAA,GACExB,IAAA,CAAAT,mBAAA;QAAA,cACcqB,CAAA,CAAE;QAAAa,OAAA,EACLJ,EAET;QAAAG,QAAA,EAECZ,CAAA,CAAE;MAAA,C,GAELZ,IAAA,CAAAR,wBAAA;QAAAe,UAAA;QAAAW,UAAA;QAAAhB,GAAA;QAAAL;MAAA,C;;;;;;;;;;;;SATFuB,E;CAiBJ","ignoreList":[]}