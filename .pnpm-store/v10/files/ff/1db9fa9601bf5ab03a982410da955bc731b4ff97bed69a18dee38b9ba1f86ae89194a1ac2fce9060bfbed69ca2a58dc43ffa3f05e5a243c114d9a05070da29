{"version":3,"file":"logout.js","names":["cookies","getCookies","headers","nextHeaders","getPayload","getExistingAuthToken","logout","config","payload","result","auth","user","message","success","existingCookie","cookiePrefix","delete","name","e","console","error","Error"],"sources":["../../src/auth/logout.ts"],"sourcesContent":["'use server'\n\nimport { cookies as getCookies, headers as nextHeaders } from 'next/headers.js'\nimport { getPayload } from 'payload'\n\nimport { getExistingAuthToken } from '../utilities/getExistingAuthToken.js'\n\nexport async function logout({ config }: { config: any }) {\n  try {\n    const payload = await getPayload({ config })\n    const headers = await nextHeaders()\n    const result = await payload.auth({ headers })\n\n    if (!result.user) {\n      return { message: 'User already logged out', success: true }\n    }\n\n    const existingCookie = await getExistingAuthToken(payload.config.cookiePrefix)\n\n    if (existingCookie) {\n      const cookies = await getCookies()\n      cookies.delete(existingCookie.name)\n      return { message: 'User logged out successfully', success: true }\n    }\n  } catch (e) {\n    console.error('Logout error:', e)\n    throw new Error(`${e}`)\n  }\n}\n"],"mappings":"AAAA;;AAEA,SAASA,OAAA,IAAWC,UAAU,EAAEC,OAAA,IAAWC,WAAW,QAAQ;AAC9D,SAASC,UAAU,QAAQ;AAE3B,SAASC,oBAAoB,QAAQ;AAErC,OAAO,eAAeC,OAAO;EAAEC;AAAM,CAAmB;EACtD,IAAI;IACF,MAAMC,OAAA,GAAU,MAAMJ,UAAA,CAAW;MAAEG;IAAO;IAC1C,MAAML,OAAA,GAAU,MAAMC,WAAA;IACtB,MAAMM,MAAA,GAAS,MAAMD,OAAA,CAAQE,IAAI,CAAC;MAAER;IAAQ;IAE5C,IAAI,CAACO,MAAA,CAAOE,IAAI,EAAE;MAChB,OAAO;QAAEC,OAAA,EAAS;QAA2BC,OAAA,EAAS;MAAK;IAC7D;IAEA,MAAMC,cAAA,GAAiB,MAAMT,oBAAA,CAAqBG,OAAA,CAAQD,MAAM,CAACQ,YAAY;IAE7E,IAAID,cAAA,EAAgB;MAClB,MAAMd,OAAA,GAAU,MAAMC,UAAA;MACtBD,OAAA,CAAQgB,MAAM,CAACF,cAAA,CAAeG,IAAI;MAClC,OAAO;QAAEL,OAAA,EAAS;QAAgCC,OAAA,EAAS;MAAK;IAClE;EACF,EAAE,OAAOK,CAAA,EAAG;IACVC,OAAA,CAAQC,KAAK,CAAC,iBAAiBF,CAAA;IAC/B,MAAM,IAAIG,KAAA,CAAM,GAAGH,CAAA,EAAG;EACxB;AACF","ignoreList":[]}