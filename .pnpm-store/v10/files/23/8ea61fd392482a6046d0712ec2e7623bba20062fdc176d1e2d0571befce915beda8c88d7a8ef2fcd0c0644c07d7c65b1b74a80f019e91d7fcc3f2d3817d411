{"version":3,"file":"index.js","names":["c","_c","useModal","React","useState","useAuth","EditDepthProvider","SelectAllStatus","useSelection","useTranslation","Drawer","ListSelectionButton","EditManyDrawerContent","baseClass","EditMany","props","$","count","selectAll","selected","t0","_jsx","EditMany_v4","ids","Array","from","keys","AllAvailable","collection","permissions","openModal","t","t1","Symbol","for","selectedFields","setSelectedFields","collectionPermissions","collections","slug","drawerSlug","update","t2","filter","Boolean","t3","t4","_jsxs","className","join","children","onClick","Header"],"sources":["../../../src/elements/EditMany/index.tsx"],"sourcesContent":["'use client'\nimport type { ClientCollectionConfig } from 'payload'\n\nimport { useModal } from '@faceless-ui/modal'\nimport React, { useState } from 'react'\n\nimport type { FieldOption } from '../FieldSelect/reduceFieldOptions.js'\n\nimport { useAuth } from '../../providers/Auth/index.js'\nimport { EditDepthProvider } from '../../providers/EditDepth/index.js'\nimport { SelectAllStatus, useSelection } from '../../providers/Selection/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { Drawer } from '../Drawer/index.js'\nimport './index.scss'\nimport { ListSelectionButton } from '../ListSelection/index.js'\nimport { EditManyDrawerContent } from './DrawerContent.js'\n\nexport const baseClass = 'edit-many'\n\nexport type EditManyProps = {\n  readonly collection: ClientCollectionConfig\n}\n\nexport const EditMany: React.FC<EditManyProps> = (props) => {\n  const { count, selectAll, selected } = useSelection()\n  return (\n    <EditMany_v4\n      {...props}\n      count={count}\n      ids={Array.from(selected.keys())}\n      selectAll={selectAll === SelectAllStatus.AllAvailable}\n    />\n  )\n}\n\nexport const EditMany_v4: React.FC<\n  {\n    count: number\n    ids: (number | string)[]\n    selectAll: boolean\n  } & EditManyProps\n> = ({ collection, count, ids, selectAll }) => {\n  const { permissions } = useAuth()\n  const { openModal } = useModal()\n\n  const { t } = useTranslation()\n\n  const [selectedFields, setSelectedFields] = useState<FieldOption[]>([])\n\n  const collectionPermissions = permissions?.collections?.[collection.slug]\n\n  const drawerSlug = `edit-${collection.slug}`\n\n  if (count === 0 || !collectionPermissions?.update) {\n    return null\n  }\n\n  return (\n    <div className={[baseClass, `${baseClass}__toggle`].filter(Boolean).join(' ')}>\n      <ListSelectionButton\n        aria-label={t('general:edit')}\n        onClick={() => {\n          openModal(drawerSlug)\n          setSelectedFields([])\n        }}\n      >\n        {t('general:edit')}\n      </ListSelectionButton>\n      <EditDepthProvider>\n        <Drawer Header={null} slug={drawerSlug}>\n          <EditManyDrawerContent\n            collection={collection}\n            count={count}\n            drawerSlug={drawerSlug}\n            ids={ids}\n            selectAll={selectAll}\n            selectedFields={selectedFields}\n            setSelectedFields={setSelectedFields}\n          />\n        </Drawer>\n      </EditDepthProvider>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}