{"version":3,"file":"index.js","names":["VersionsPill","documentViewKeys","getTabs","collectionConfig","globalConfig","customViews","admin","components","views","edit","tab","href","label","t","order","viewPath","condition","config","Boolean","livePreview","collections","includes","slug","globals","permissions","versions","readVersions","Pill_Component","hideAPIURL","concat","Object","entries","reduce","acc","key","value","push","path","sort","a","b","undefined"],"sources":["../../../../../src/elements/DocumentHeader/Tabs/tabs/index.tsx"],"sourcesContent":["import type { DocumentTabConfig, SanitizedCollectionConfig, SanitizedGlobalConfig } from 'payload'\n\nimport { VersionsPill } from './VersionsPill/index.js'\n\nexport const documentViewKeys = ['api', 'default', 'livePreview', 'versions']\n\nexport type DocumentViewKey = (typeof documentViewKeys)[number]\n\nexport const getTabs = ({\n  collectionConfig,\n  globalConfig,\n}: {\n  collectionConfig?: SanitizedCollectionConfig\n  globalConfig?: SanitizedGlobalConfig\n}): { tab: DocumentTabConfig; viewPath: string }[] => {\n  const customViews =\n    collectionConfig?.admin?.components?.views?.edit ||\n    globalConfig?.admin?.components?.views?.edit ||\n    {}\n\n  return [\n    {\n      tab: {\n        href: '',\n        label: ({ t }) => t('general:edit'),\n        order: 100,\n        ...(customViews?.['default']?.tab || {}),\n      },\n      viewPath: '/',\n    },\n    {\n      tab: {\n        condition: ({ collectionConfig, config, globalConfig }) => {\n          if (collectionConfig) {\n            return Boolean(\n              config?.admin?.livePreview?.collections?.includes(collectionConfig.slug) ||\n                collectionConfig?.admin?.livePreview,\n            )\n          }\n\n          if (globalConfig) {\n            return Boolean(\n              config?.admin?.livePreview?.globals?.includes(globalConfig.slug) ||\n                globalConfig?.admin?.livePreview,\n            )\n          }\n\n          return false\n        },\n        href: '/preview',\n        label: ({ t }) => t('general:livePreview'),\n        order: 200,\n        ...(customViews?.['livePreview']?.tab || {}),\n      },\n      viewPath: '/preview',\n    },\n    {\n      tab: {\n        condition: ({ collectionConfig, globalConfig, permissions }) =>\n          Boolean(\n            (collectionConfig?.versions &&\n              permissions?.collections?.[collectionConfig?.slug]?.readVersions) ||\n              (globalConfig?.versions && permissions?.globals?.[globalConfig?.slug]?.readVersions),\n          ),\n        href: '/versions',\n        label: ({ t }) => t('version:versions'),\n        order: 300,\n        Pill_Component: VersionsPill,\n        ...(customViews?.['versions']?.tab || {}),\n      },\n      viewPath: '/versions',\n    },\n    {\n      tab: {\n        condition: ({ collectionConfig, globalConfig }) =>\n          (collectionConfig && !collectionConfig?.admin?.hideAPIURL) ||\n          (globalConfig && !globalConfig?.admin?.hideAPIURL),\n        href: '/api',\n        label: 'API',\n        order: 400,\n        ...(customViews?.['api']?.tab || {}),\n      },\n      viewPath: '/api',\n    },\n  ]\n    .concat(\n      Object.entries(customViews).reduce((acc, [key, value]) => {\n        if (documentViewKeys.includes(key)) {\n          return acc\n        }\n\n        if (value?.tab) {\n          acc.push({\n            tab: value.tab,\n            viewPath: 'path' in value ? value.path : '',\n          })\n        }\n\n        return acc\n      }, []),\n    )\n    ?.sort(({ tab: a }, { tab: b }) => {\n      if (a.order === undefined && b.order === undefined) {\n        return 0\n      } else if (a.order === undefined) {\n        return 1\n      } else if (b.order === undefined) {\n        return -1\n      }\n\n      return a.order - b.order\n    })\n}\n"],"mappings":"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","ignoreList":[]}